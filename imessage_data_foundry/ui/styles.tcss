/* iMessage Data Foundry TUI Styles - iMessage Inspired Theme */

/* ========================================
   iMessage Color Palette
   ======================================== */

$imessage-blue: #007AFF;
$imessage-blue-dark: #0056CC;
$imessage-blue-light: #5AC8FA;
$imessage-green: #34C759;
$imessage-green-dark: #248A3D;
$imessage-orange: #FF9500;
$imessage-red: #FF3B30;
$imessage-yellow: #FFCC00;

$imessage-bg: #000000;
$imessage-bg-elevated: #1C1C1E;
$imessage-surface: #2C2C2E;
$imessage-surface-elevated: #3A3A3C;
$imessage-separator: #38383A;

$imessage-text-primary: #FFFFFF;
$imessage-text-secondary: #8E8E93;
$imessage-text-tertiary: #636366;

/* ========================================
   Global Styles
   ======================================== */

Screen {
    layout: vertical;
    background: $imessage-bg-elevated;
}

#screen-body {
    height: 1fr;
    padding: 1 2;
}

/* ========================================
   Typography
   ======================================== */

.section-label {
    text-style: bold;
    margin-top: 1;
    margin-bottom: 1;
    color: $imessage-text-primary;
}

.hint {
    color: $imessage-text-secondary;
    text-style: italic;
    margin-top: 0;
    margin-bottom: 1;
}

.text-muted {
    color: $imessage-text-secondary;
}

.text-success {
    color: $imessage-green;
}

.text-error {
    color: $imessage-red;
}

.text-warning {
    color: $imessage-orange;
}

/* ========================================
   Step Progress Bar
   ======================================== */

StepProgressBar {
    dock: top;
    height: 5;
    background: $imessage-surface;
    border-bottom: solid $imessage-separator;
    padding: 1 2;
}

StepProgressBar .step-dots {
    height: 1;
    content-align: center middle;
}

StepProgressBar .step-title {
    height: 1;
    content-align: center middle;
    color: $imessage-text-secondary;
    margin-top: 1;
}

/* ========================================
   Welcome Screen
   ======================================== */

#welcome-center {
    width: 100%;
    height: 100%;
}

#welcome-content {
    width: auto;
    height: auto;
    align: center middle;
}

#app-header {
    text-align: center;
    text-style: bold;
    color: $imessage-blue;
    height: auto;
    width: 100%;
    margin-bottom: 1;
}

#tagline {
    text-align: center;
    color: $imessage-text-secondary;
    height: auto;
    width: 100%;
    margin-bottom: 2;
}

#button-row {
    height: auto;
    width: auto;
    align: center middle;
    margin-bottom: 2;
}

#button-row Button {
    margin: 0 1;
    min-width: 18;
}

#start-wizard {
    background: $imessage-blue;
}

#start-wizard:hover {
    background: $imessage-blue-dark;
}

#start-wizard:focus {
    background: $imessage-blue-dark;
}

#manage-personas {
    background: $imessage-surface-elevated;
    border: round $imessage-separator;
}

#manage-personas:hover {
    background: $imessage-separator;
}

#hint {
    text-align: center;
    color: $imessage-text-tertiary;
    height: auto;
    width: 100%;
}

/* ========================================
   Config Screen
   ======================================== */

#config-scroll {
    height: 1fr;
    padding: 1 2;
}

#config-scroll > Center {
    width: 100%;
    height: auto;
    margin-bottom: 1;
}

/* Section Card Styling */
SectionCard {
    background: $imessage-surface;
    border: round $imessage-surface-elevated;
    padding: 1 2;
    margin-bottom: 1;
    height: auto;
    width: 70;
    max-width: 90%;
}

SectionCard:focus-within {
    border: round $imessage-blue 50%;
}

SectionCard .card-title {
    text-style: bold;
    color: $imessage-text-primary;
    margin-bottom: 1;
    height: auto;
}

SectionCard .card-content {
    height: auto;
}

#provider-status {
    margin-bottom: 1;
    padding: 0;
    height: auto;
}

/* ========================================
   Selection Card
   ======================================== */

SelectionCard {
    height: auto;
    padding: 0 1;
    margin: 0 0 1 0;
    border: round $imessage-surface-elevated;
    background: $imessage-surface;
}

SelectionCard:hover {
    background: $imessage-surface-elevated;
}

SelectionCard:focus {
    border: tall $imessage-blue;
    background: $imessage-surface-elevated;
}

SelectionCard.selected {
    border: round $imessage-blue;
    background: $imessage-blue 15%;
}

SelectionCard.disabled {
    opacity: 0.5;
}

SelectionCard .card-row {
    height: auto;
    padding: 1 0;
}

SelectionCard .card-icon {
    width: 4;
    height: auto;
    content-align: left middle;
}

SelectionCard .card-info {
    width: 1fr;
    height: auto;
}

SelectionCard .card-label {
    text-style: bold;
    color: $imessage-text-primary;
    height: auto;
}

SelectionCard .card-description {
    color: $imessage-text-secondary;
    height: auto;
}

SelectionCard .card-status {
    width: 3;
    height: auto;
    content-align: right middle;
}

/* ========================================
   Personas Screen
   ======================================== */

#personas-layout {
    height: 100%;
}

#personas-list-panel {
    width: 60%;
    padding: 1;
    border-right: solid $imessage-separator;
}

#create-form-panel {
    width: 40%;
    padding: 0;
    background: $imessage-bg-elevated;
    height: 100%;
    overflow: hidden;
}

#personas-list {
    height: 1fr;
    margin-bottom: 1;
}

#personas-actions {
    height: auto;
    dock: bottom;
    padding-top: 1;
}

#personas-actions Button {
    margin-right: 1;
}

#selection-hint {
    margin-bottom: 1;
    color: $imessage-text-secondary;
}

#no-personas {
    color: $imessage-text-secondary;
    text-style: italic;
    padding: 2;
    text-align: center;
}

/* ========================================
   Avatar Circle
   ======================================== */

AvatarCircle {
    width: 5;
    height: 3;
    content-align: center middle;
    text-style: bold;
}

AvatarCircle.small {
    width: 3;
    height: 1;
}

/* ========================================
   Persona Cards
   ======================================== */

PersonaCard {
    height: auto;
    padding: 1 2;
    margin-bottom: 1;
    border: round $imessage-surface-elevated;
    background: $imessage-surface;
}

PersonaCard:hover {
    background: $imessage-surface-elevated;
}

PersonaCard.selected {
    border: round $imessage-green;
    background: $imessage-green 15%;
}

PersonaCard .persona-row {
    height: auto;
}

PersonaCard .avatar-section {
    width: 6;
    height: auto;
    content-align: center middle;
}

PersonaCard .info-section {
    width: 1fr;
    padding-left: 1;
}

PersonaCard .persona-header {
    height: auto;
}

PersonaCard .persona-name {
    text-style: bold;
    color: $imessage-text-primary;
}

PersonaCard .persona-identifier {
    color: $imessage-text-secondary;
}

PersonaCard .persona-details {
    color: $imessage-text-secondary;
}

PersonaCard .self-badge {
    color: $imessage-blue;
    text-style: bold;
    margin-left: 1;
}

/* ========================================
   Create Persona Form
   ======================================== */

CreatePersonaForm {
    height: 1fr;
    padding: 1 2;
    border: round $imessage-surface-elevated;
    background: $imessage-surface;
    margin: 1;
    scrollbar-gutter: stable;
}

CreatePersonaForm .form-title {
    text-style: bold;
    color: $imessage-text-primary;
    margin-bottom: 0;
}

CreatePersonaForm .form-subtitle {
    color: $imessage-text-tertiary;
    margin-bottom: 1;
}

CreatePersonaForm .btn-hint {
    color: $imessage-text-tertiary;
    margin-left: 1;
    width: auto;
}

CreatePersonaForm Label {
    margin-top: 1;
    color: $imessage-text-secondary;
}

CreatePersonaForm Input,
CreatePersonaForm Select,
CreatePersonaForm TextArea {
    margin-bottom: 1;
}

CreatePersonaForm .form-actions {
    margin-top: 1;
    height: auto;
}

CreatePersonaForm .form-actions Button {
    margin-right: 1;
}

/* ========================================
   Conversations Screen
   ======================================== */

#conversation-config {
    padding: 1 4;
    max-width: 100;
}

#selected-personas-display {
    border: round $imessage-surface-elevated;
    padding: 1 2;
    margin-bottom: 2;
    background: $imessage-surface;
    height: auto;
}

#selected-personas-display .personas-row {
    height: auto;
    align: left middle;
}

#conversation-config Input {
    margin-bottom: 0;
}

#conversation-config Select {
    margin-bottom: 1;
}

#time-range {
    height: auto;
    align: left middle;
}

#time-range Label {
    margin-top: 1;
    margin-right: 1;
}

#time-range Input {
    width: 10;
}

.seed-input {
    height: 5;
    margin-bottom: 1;
    border: round $imessage-surface-elevated;
}

.seed-input:focus {
    border: round $imessage-blue;
    outline: solid $imessage-blue;
}

#validation-message {
    margin-top: 2;
    padding: 1;
    text-align: center;
}

/* ========================================
   Generation Screen
   ======================================== */

#generation-content {
    align: center middle;
    height: 100%;
    width: 80%;
    max-width: 100;
}

#gen-title {
    text-align: center;
    text-style: bold;
    margin-bottom: 2;
    color: $imessage-text-primary;
}

#gen-phase {
    text-align: center;
    margin-bottom: 1;
    color: $imessage-text-secondary;
}

#gen-progress {
    margin: 2 0;
    width: 100%;
}

#gen-progress ProgressBar > .bar--bar {
    color: $imessage-blue;
}

#gen-progress ProgressBar > .bar--complete {
    color: $imessage-green;
}

#gen-stats {
    text-align: center;
    color: $imessage-text-secondary;
    margin-bottom: 1;
}

#gen-result {
    text-align: center;
    margin-top: 2;
    padding: 2;
    border: round $imessage-green;
    background: $imessage-green 15%;
}

#gen-result .result-icon {
    color: $imessage-green;
    text-style: bold;
}

#gen-result .result-path {
    color: $imessage-text-primary;
    margin-top: 1;
}

#gen-buttons {
    margin-top: 3;
    height: auto;
    align: center middle;
}

#gen-buttons Button {
    margin: 0 1;
    min-width: 16;
}

/* ========================================
   Animated Spinner
   ======================================== */

AnimatedSpinner {
    width: auto;
    height: 1;
    content-align: center middle;
    color: $imessage-blue;
}

/* ========================================
   Navigation Bar
   ======================================== */

NavigationBar {
    dock: bottom;
    height: 5;
    padding: 1 2;
    align: right middle;
    background: $imessage-surface;
    border-top: solid $imessage-separator;
}

NavigationBar Button {
    margin: 0 1;
    min-width: 14;
}

#nav-back {
    background: $imessage-surface-elevated;
    border: round $imessage-separator;
}

#nav-back:hover {
    background: $imessage-separator;
}

#nav-next {
    background: $imessage-blue;
}

#nav-next:hover {
    background: $imessage-blue-dark;
}

#nav-next:disabled {
    background: $imessage-surface-elevated;
    opacity: 0.5;
}

/* ========================================
   Form Elements
   ======================================== */

Input {
    border: round $imessage-surface-elevated;
    background: $imessage-surface;
}

Input:focus {
    border: round $imessage-blue;
    outline: solid $imessage-blue;
}

RadioSet {
    border: none;
    background: transparent;
}

RadioButton {
    padding: 0 1;
}

RadioButton:focus {
    background: $imessage-surface-elevated;
}

RadioButton.-on {
    color: $imessage-blue;
}

Select {
    border: round $imessage-surface-elevated;
    background: $imessage-surface;
}

Select:focus {
    border: round $imessage-blue;
    outline: solid $imessage-blue;
}

Select > SelectCurrent {
    background: $imessage-surface;
}

Select > SelectOverlay {
    background: $imessage-surface-elevated;
    border: round $imessage-separator;
}

TextArea {
    border: round $imessage-surface-elevated;
    background: $imessage-surface;
}

TextArea:focus {
    border: round $imessage-blue;
    outline: solid $imessage-blue;
}

Checkbox {
    background: transparent;
    padding: 0 1;
}

Checkbox:focus {
    background: $imessage-surface-elevated;
    outline: solid $imessage-blue;
}

Checkbox.-on .toggle--button {
    color: $imessage-blue;
}

/* ========================================
   Buttons
   ======================================== */

Button {
    min-width: 12;
}

Button:focus {
    text-style: bold;
    outline: double $imessage-text-primary;
}

Button.primary {
    background: $imessage-blue;
}

Button.primary:hover {
    background: $imessage-blue-dark;
}

Button.success {
    background: $imessage-green;
}

Button.success:hover {
    background: $imessage-green-dark;
}

Button.error {
    background: $imessage-red;
}

Button.warning {
    background: $imessage-orange;
}

Button.-default-button {
    background: $imessage-surface-elevated;
}

Button.-default-button:hover {
    background: $imessage-separator;
}

/* ========================================
   Footer
   ======================================== */

Footer {
    background: $imessage-surface;
    color: $imessage-text-secondary;
}

Footer > .footer--highlight {
    background: $imessage-blue;
}

Footer > .footer--key {
    background: $imessage-surface-elevated;
}

/* ========================================
   Toast / Notifications
   ======================================== */

Toast {
    background: $imessage-surface-elevated;
    border: round $imessage-separator;
}

Toast.-information {
    border: round $imessage-blue;
}

Toast.-success {
    border: round $imessage-green;
}

Toast.-warning {
    border: round $imessage-orange;
}

Toast.-error {
    border: round $imessage-red;
}

/* ========================================
   Scrollbars
   ======================================== */

VerticalScroll > .scrollbar {
    background: $imessage-surface;
}

VerticalScroll > .scrollbar--bar {
    background: $imessage-surface-elevated;
}

VerticalScroll > .scrollbar--bar:hover {
    background: $imessage-separator;
}

/* ========================================
   LLM Generation UI
   ======================================== */

.field-with-action {
    height: auto;
    align: left middle;
    margin-bottom: 0;
}

.field-with-action Label {
    width: auto;
}

.small-btn {
    min-width: 14;
    height: 3;
    margin-left: 2;
    padding: 0 1;
}

TextArea.placeholder-visible {
    color: $imessage-text-tertiary;
}

.loading-status {
    margin-top: 0;
    height: 1;
    color: $imessage-blue;
}

.loading-status.error {
    color: $imessage-red;
}

.loading-status.success {
    color: $imessage-green;
}

/* Quick Start Button */
#quick-start {
    background: $imessage-green;
}

#quick-start:hover {
    background: #2DB84D;
}

#quick-start:focus {
    border: tall $imessage-green;
}

#quick-start-status {
    margin-top: 1;
    text-align: center;
    height: 1;
}

/* Auto-generate button */
#auto-generate-btn {
    background: $imessage-orange;
}

#auto-generate-btn:hover {
    background: #E68600;
}
